var _=Object.defineProperty;var P=(o,e)=>_(o,"name",{value:e,configurable:!0});import{consola as D}from"consola";import L from"node:process";import{jsx as t,jsxs as A}from"react/jsx-runtime";import{Box as g,Text as I,useInput as z,useApp as G,render as J}from"ink";import{memo as y,useState as k,useRef as K,useEffect as M,useCallback as X,useMemo as j,createElement as O}from"react";import N from"arr-rotate";import Y from"fast-deep-equal";import Z from"figures";import{Badge as V,extendTheme as H,defaultTheme as ee,ThemeProvider as oe}from"@inkjs/ui";var re={error:(o,e)=>{D.error(o),e&&L.exit(1)},info:(o,e)=>{D.info(o),e&&L.exit(0)},success:(o,e)=>{D.success(o),e&&L.exit(0)},warn:(o,e)=>{D.warn(o),e&&L.exit(0)}};const te={blue:"#8ae8ff",cyan:"#95f3d9",geekblue:"#369eff",gold:"#ffcb47",gray:"#777777",green:"#55b467",lime:"#c4f042",magenta:"#e34ba9",orange:"#ff802b",pink:"#eb2f96",purple:"#bd54c6",red:"#f04f88",volcano:"#ec5e41",yellow:"#ffef5c"},ce={colorError:"red",colorInfo:"blue",colorPrimary:"cyan",colorSuccess:"green",colorWarning:"yellow"};var ne={colorBgContainer:"#111111",colorBgElevated:"#222222",colorBgLayout:"#000000",colorBgSpotlight:"#444444",colorBorder:"#333333",colorBorderSecondary:"#2d2d2d",colorText:"#ffffff",colorTextDescription:"#6f6f6f",colorTextPlaceholder:"#555555",colorTextQuaternary:"#555555",colorTextSecondary:"#aaaaaa",colorTextTertiary:"#6f6f6f",...ce,...te};const T=P(()=>ne,"useTheme"),U=y(({show:o=!0,children:e,footer:n,reverse:r=!1,header:l,headerConfig:s,footerConfig:h,bodyConfig:a,title:d,...S})=>{const c=T();if(!o)return;const f=(d||l)&&t(g,{borderColor:c.colorBorder,borderLeft:!1,borderRight:!1,borderStyle:"bold",borderTop:!1,flexDirection:"row",justifyContent:"center",paddingLeft:1,paddingRight:1,...s,children:d?t(I,{bold:!0,children:d.toUpperCase()}):l}),x=t(g,{flexDirection:"column",paddingLeft:1,paddingRight:1,...a,children:e}),i=n&&t(g,{borderBottom:r,borderColor:c.colorBorder,borderLeft:!1,borderRight:!1,borderStyle:"single",borderTop:!r,flexDirection:"row",paddingLeft:1,paddingRight:1,...h,children:n});return A(g,{alignItems:"stretch",borderColor:c.colorBorder,borderStyle:"bold",flexDirection:"column",...S,children:[f,r?i:x,r?x:i]})}),le=y(({highlightColor:o,isSelected:e=!1})=>t(g,{marginRight:1,children:e?t(I,{color:o,children:Z.pointer}):t(I,{children:" "})})),se=y(({highlightColor:o,isSelected:e=!1,label:n})=>t(I,{color:e?o:void 0,children:n})),$=y(({highlightColor:o,items:e=[],isFocused:n=!0,initialIndex:r=0,indicatorComponent:l=le,itemComponent:s=se,limit:h,onSelect:a,onHighlight:d})=>{const S=T(),c=typeof h=="number"&&e.length>h,f=c?Math.min(h,e.length):e.length,x=f-1,[i,u]=k(r>x?x-r:0),[p,v]=k(r?r>x?x:r:0),F=K(e);M(()=>{Y(F.current.map(b=>b.value),e.map(b=>b.value))||(u(0),v(0)),F.current=e},[e]),z(X((b,B)=>{if(B.upArrow){const m=(c?f:e.length)-1,w=p===0,R=c?p:m,C=w?i+1:i,E=w?R:p-1;u(C),v(E);const W=c?N(e,C).slice(0,f):e;typeof d=="function"&&d(W[E])}if(B.downArrow){const m=p===(c?f:e.length)-1,w=c?p:0,R=m?i-1:i,C=m?w:p+1;u(R),v(C);const E=c?N(e,R).slice(0,f):e;typeof d=="function"&&d(E[C])}if(B.return){const m=c?N(e,i).slice(0,f):e;typeof a=="function"&&a(m[p])}},[c,f,i,p,e,a,d]),{isActive:n});const Q=j(()=>c?N(e,i).slice(0,f):e,[c,i,f]);return t(g,{flexDirection:"column",children:Q.map((b,B)=>{const m=B===p;return A(g,{children:[O(l,{highlightColor:o??S.colorPrimary,isSelected:m}),O(s,{...b,highlightColor:o??S.colorPrimary,isSelected:m})]},b.key??b.value)})})}),de=y(({maxLength:o=30,defaultValue:e,label:n,showValue:r=!0,value:l})=>{const s=T(),h=j(()=>n+Array.from({length:o-n.length}).fill("").join(" "),[n,o]),a=j(()=>e===l,[e,l]);return A(I,{children:[h,e?t(V,{color:a?s.colorText:s.colorInfo,children:r?l:a?"DEFAULT":"CUSTOM"}):t(V,{color:a?s.colorError:s.colorSuccess,children:r?l:a?"UNSET":"SET"})]})}),ae=y(({active:o,setActive:e,maxLength:n=30,show:r=!0,items:l,logo:s,title:h,...a})=>{const[d,S]=k(),c=T(),{exit:f}=G(),x=j(()=>[...l.map(u=>({label:t(de,{defaultValue:u.defaultValue,label:u.label,maxLength:n,showValue:u.showValue,value:u.value}),value:u.key})),{label:"Exit",value:"exit"}],[l]),i=P(u=>{u.value==="exit"&&f();const p=l.find(v=>v.key===u.value);p&&(S(p),e?.(u.value))},"handleSelect");if(r)return o&&d?t(U,{footer:d.desc&&A(I,{color:c.colorTextDescription,children:[t(I,{bold:!0,children:"\u{1F449}NOTE: "}),d.desc]}),title:[s,d.label].filter(Boolean).join(" "),...a,children:d.children}):t(U,{show:!o,title:[s,h].filter(Boolean).join(" "),...a,children:t($,{items:x,onSelect:i})})}),q=y(({children:o})=>{const e=T();M(()=>{},[]);const n=H(ee,{components:{Select:{styles:{focusIndicator:()=>({color:e.colorInfo}),label({isFocused:r,isSelected:l}){let s;return l?s=e.colorSuccess:r&&(s=e.colorPrimary),{color:s}},selectedIndicator:()=>({color:e.colorPrimary})}}}});return t(oe,{theme:n,children:o})}),fe=P(o=>J(t(q,{children:o})),"render"),ie=y(({children:o,direction:e="top",...n})=>{const r=T();return t(g,{borderBottom:e!=="top",borderColor:r.colorBorder,borderLeft:!1,borderRight:!1,borderStyle:"single",borderTop:e==="top",flexDirection:"column",...n,children:o})});export{ae as ConfigPanel,U as Panel,$ as SelectInput,ie as SplitView,q as ThemeProvider,re as alert,fe as render,T as useTheme};
