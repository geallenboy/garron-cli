#!/usr/bin/env node
var l=Object.defineProperty;var a=(i,n)=>l(i,"name",{value:n,configurable:!0});import{Command as d,Option as p}from"commander";import{consola as e}from"consola";import m from"update-notifier";import{existsSync as u,readFileSync as h,writeFileSync as b}from"node:fs";import{resolve as v}from"node:path";var f="@garron/cli-shebang",y="0.0.5",w="Add Shebang to target file",j="https://github.com/geallenboy/garron-cli/tree/master/packages/garron-cli-shebang",k={url:"https://github.com/geallenboy/garron-cli/issues/new"},N={type:"git",url:"https://github.com/geallenboy/garron-cli.git"},S="MIT",E="gejialun88@gmail.com",F="module",O={"@":"./src"},T={"garron-shebang":"dist/cli.js",shebang:"dist/cli.js"},x=["dist"],C={build:"npm run type-check && pkgroll --minify -p tsconfig.prod.json --env.NODE_ENV=production && npm run shebang",dev:"pkgroll -p tsconfig.prod.json --env.NODE_ENV=development --watch",link:"npm run build && npm link -f",prepare:"npm run build",shebang:"node ./dist/cli.js -t ./dist/cli.js",start:"node ./dist/cli.js",test:"vitest --passWithNoTests","test:coverage":"vitest run --coverage --passWithNoTests","type-check":"tsc --noEmit"},A={commander:"^11",consola:"^3","update-notifier":"^7"},$={node:">=18"},D={access:"public",registry:"https://registry.npmjs.org/"},s={name:f,version:y,description:w,homepage:j,bugs:k,repository:N,license:S,author:E,type:F,imports:O,bin:T,files:x,scripts:C,dependencies:A,engines:$,publishConfig:D};const I=a((i,n="#!/usr/bin/env node")=>{const t=v(i);if(!u(t))return e.error("File is not exist");const r=h(t,"utf8");if(!r)return e.warn("File is not empty");if(r.includes("#!/usr/bin/env"))return e.warn("This file aready has a shebang");const g=`${n}
${r}`;b(t,g,"utf8"),e.success(`\u{1FAA7} Shebang added to ${t}`)},"Shebang"),P=m({pkg:s,shouldNotifyInNpmScript:!0});P.notify({isGlobal:!0});const c=new d;c.name("garron-shebang").description(s.description).version(s.version).addOption(new p("-t, --target <file>","Target file")).addOption(new p("-s, --shebang <string>","Shebang")).parse();const o=c.opts();o.target?I(o.target,o.shebang):e.error("Please input target file with -t <file>");
